# optimization-practice

Сервис статистических расчётов на Go. Оптимизация CPU и памяти.

## Архитектура

- Clean Architecture (models, services, handlers, server)
- Dependency injection
- testify для тестов
- gin для HTTP

## Результаты оптимизации

### Before (исходное состояние)

- **Бенчмарк:** 4.935ms/op (1M элементов)
- **CPU бизнес-логика:** 60.19% (getVariance 22.57%, getSum 21.18%, getMinMax 16.44%)
- **CPU сервер:** ~34% на JSON парсинг

### Op1: Объединение циклов

- **Изменения:** Заменили 3 отдельных прохода на 2 прохода (getSumMinMax)
- **Бенчмарк:** 3.754ms/op (+24% производительности)
- **CPU бизнес-логика:** 46.87% (-13% нагрузки)

### Op2: Удаление Gin (неудачно)

- **Изменения:** Перешли на stdlib net/http вместо Gin
- **CPU сервер:** Увеличение нагрузки на HTTP обработку
- **Вывод:** Gin достаточно оптимизирован для JSON и HTTP

### Финальные метрики

- ✅ **Производительность:** +24% к исходному
- ✅ **CPU бизнес-логика:** -13% нагрузки
- ✅ **Аллокации:** 64B/op, 1 alloc/op
